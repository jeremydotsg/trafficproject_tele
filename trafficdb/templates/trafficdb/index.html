{% extends "trafficdb/base.html" %}
	{% block page_title %}
	<div class="container-lg mt-3 px-xs-0 px-sm-0">
		
	    <div class="d-flex align-items-center p-3 my-3 text-white bg-purple rounded shadow-sm bold"><h2 class="text-center">Checkpoint Jam or Not?</h2></div>
	    {% endblock page_title %}
	    {% block page_content %}
	    <p class="text-center mb-3">Share and stay informed on the updates!</p>
	    <p class="text-center mb-3">How to share? Click on the coloured buttons to share the latest queue!</p>
	    <p class="text-center mb-3">The queue status is aggregated from the queue shared in the past hour.</p>
	    <div class="card">
	    <nav>
		  <div class="nav nav-pills px-1 py-1" id="nav-tab" role="tablist">
		  	{% for direction, queues in packed.items %}
			  	{% if forloop.first %}
			    	<button class="nav-link active" id="nav-{{ forloop.counter }}-tab" data-bs-toggle="tab" data-bs-target="#nav-{{ forloop.counter }}" type="button" role="tab" aria-controls="nav-home" aria-selected="true">{{direction}}</button>
			    {% else %}
					<button class="nav-link" id="nav-{{ forloop.counter }}-tab" data-bs-toggle="tab" data-bs-target="#nav-{{ forloop.counter }}" type="button" role="tab" aria-controls="nav-home" aria-selected="false">{{direction}}</button>
			  	{% endif %}
			{% endfor %}
		  </div>
		</nav>
		<div class="tab-content" id="nav-tabContent">
			{% for direction, queues in packed.items %}
				{% if forloop.first %}
		  		<div class="tab-pane fade show active" id="nav-{{ forloop.counter }}" role="tabpanel" aria-labelledby="nav-{{ forloop.counter }}-tab">
		  		{% else %}
		  		<div class="tab-pane fade" id="nav-{{ forloop.counter }}" role="tabpanel" aria-labelledby="nav-{{ forloop.counter }}-tab">
		  		{% endif %}
		  			<ul class="list-group list-group-flush">
	                    {% for queue, status in queues.items %}
	                        <li class="list-group-item d-flex justify-content-between align-items-center">
	                            <span class="fw-bold">{{ queue }}</span>
	                            <a href="{% url 'trafficdb:queue_detail' queue_id=queue.id %}" class="stretched-link">
	                                {% if status %}
	                                    <button type="button" class="btn {{ status.queueLength.queueColor }} btn-sm float-end">{{ status.queueLength }}</button>
	                                {% else %}
	                                    <button type="button" class="btn btn-light btn-sm float-end">No data</button>
	                                {% endif %}
	                            </a>
	                        </li>
	                    {% endfor %}
	                </ul>
		  		</div>
			{% endfor %}
		</div>
		</div>
	</div>
	{% endblock page_content %}